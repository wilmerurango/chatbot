{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <!--  This file has been downloaded from bootdey.com @bootdey on twitter -->
    <!--  All snippets are MIT license http://bootdey.com/license -->
    <title>Botmic</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.bundle.min.js"></script>
    <link href="{% static 'dist/css/estilos_chat.css' %}" rel="stylesheet" />
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />


</head>
<body>
<div class="rounded" style="position: relative; background: #3a87ad; top: 0px; height: 100px; margin: 10px;">
    .
    <div class="container" style="position: absolute;
        top: 5px;
        margin: 0 auto; 
        left: 0;
        right: 0;" >

        <div class="row clearfix">
            <div class="col-lg-12">
                <div class="card chat-app border border-info">
                    <div id="plist" class="people-list">
                        <div class="input-group color_gris">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="fa fa-search"></i></span>
                            </div>
                            <input type="text" class="form-control" placeholder="Buscar...">
                            
                        </div>
                        <ul class="list-unstyled chat-list mt-2 mb-0">
    
                            <li class="clearfix active">
                                <img src="{% static 'dist/img/chatbot.png' %}" alt="avatar">
                                <div class="about">
                                    <div class="name">TIBO</div>
                                    <div class="status"> <i class="fa fa-circle online"></i>En linea </div>                                            
                                </div>
                            </li>
                        
                        </ul>
                    </div>
                    <div class="chat border-info">
                        <div class="chat-header clearfix rounded color_gris border-info">
                            <!-- <div class="row" > -->
                                <div class="hidden-sm">
                                    <a href="javascript:void(0);" data-toggle="modal" data-target="#view_info" style="align-content: left;">
                                        <img src="{% static 'dist/img/chatbot.png' %}" alt="avatar">
                                    </a>
                                    <div class="text-right">
                                        <!-- <a href="javascript:void(0);" class="btn btn-outline-secondary"><i class="fa fa-camera"></i></a>
                                        <a href="javascript:void(0);" class="btn btn-outline-primary"><i class="fa fa-image"></i></a>-->
                                        <a href="{% url 'index' %}" class="btn btn-outline-info"><i class="fa fa-cogs"></i></a> 
                                        <a href="{% url 'logout' %}" class="btn btn-outline-warning"> Salir</a>
                                    </div>
                                </div>
                            <!-- </div> -->
                        </div>
    
                        <div class="chat-history overflow-auto modo_scroll">
    
                            <ul class="m-b-0 conversation" id="content_conversacion">

                                {% for msj in conversacions %}

                                    {% if msj.user.usuario_bot == "Si" %}
                                        <li class="clearfix">
                            
                                            <div class="message my-message" style="max-width: 90%;">
                                                <span>{{ msj.mensaje}}</span>
                                                <br>
                                                <span class="message-time" style="color: rgb(158, 159, 159);">
                                                    {{ msj.fecha }}
                                                    
                                                </span>
                                            </div> 
                                                                            
                                        </li> 

                                    {% else %}
                                        
                                        <li class="clearfix">
        
                                            <div class="message other-message float-right" style="max-width: 90%;"> 
                                                <span>Hi Aiden, how are you? How is the projecfnfkjbnfkbkdfbvdfkbvfkhvbfdkvbkjvhbkcvhbdlvkhblvkhfbvhfblkhdfbvkdfjvbñkdfjvbdfkñjvbfkñjvbdfkjñvbkjñfkñvjbkñbkt coming along? </span> 
                                                <br>
                                                <span class="message-time" style="color: rgb(158, 159, 159);">
                                                    5:10:10
                                                </span>
                                            </div>
                                            
                                        </li>
                                    {% endif %}


                                {% endfor %}
                                
    
                            </ul>
    
                        </div>
                        <div class="chat-message clearfix rounded border border-info" style="background: #f5f1ee;margin: 0 auto;">
                           
                           <form action="">
                                <div class="input-group mb-0">
                                    <div class="input-group-prepend">
                                        
                                        <span onclick="enviar_mensaje();" class="input-group-text"><a href="#"> <i class="fa fa-send"></i></a></span>
                                    </div>
                                    
                                    <input type="text" class="form-control" id="comment" placeholder="Escribe aqui...">                                    
                                </div>
                           </form>
                           
 
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
    </div>
    

</div>



<script type="text/javascript">
    function enviar_mensaje(){
            var hoy = new Date();
            var hora = hoy.getHours() + ':' + hoy.getMinutes() + ':' + hoy.getSeconds();

            var caja_conversacion = document.getElementById("content_conversacion");
            var mensaje = document.getElementById("comment").value;
            var caja_mensaje = document.getElementById("comment");

            var c_li = document.createElement("li");
            c_li.className += "clearfix";
            
            var div1 = document.createElement("div");
            div1.className += "message other-message float-right";
            div1.style = "max-width: 90%;"

            var spann = document.createElement("span");
            spann.textContent = mensaje

            var brr = document.createElement("br");

            var spann2 = document.createElement("span");
            spann2.className += "message-time"
            spann2.style = "color: rgb(158, 159, 159);"
            spann2.textContent = "fecha hora"


            div1.appendChild(spann)
            div1.appendChild(brr)
            div1.appendChild(spann2)
            c_li.appendChild(div1)
            
            
            // console.log(c_li)
            if(mensaje != ""){
                caja_conversacion.appendChild(c_li)
                caja_mensaje.value="";
            };
            
            

  
        }

</script>
</body>
</html>